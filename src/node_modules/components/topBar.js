import React, {useContext, Fragment} from 'react'
import {NavLink} from 'react-router-dom'

import {CurrentUserContext} from 'context/currentUser'

const  TopBar = () => {
  const [CurrentUserState] = useContext(CurrentUserContext)
  console.log('currentuser', CurrentUserState)

    return (
      <nav className='navbar navbar-light'>
        <div className='container'>
          <NavLink to='/' className='navbar-brand' >
            Medium
          </NavLink>

          <ul className='nav navbar-nav pull-xs-right'>
            <li className='nav-item'>
              <NavLink to='/' className='nav-link' exact>
                Home
              </NavLink>
            </li>
            {CurrentUserState.isLoggedIn === false && (
                <Fragment>
                <li className='nav-item'>
                  <NavLink to='/login' className='nav-link'>
                    Sign in
                  </NavLink>
                </li>
  
                <li className='nav-item'>
                  <NavLink to='/register' className='nav-link'>
                  Sign up
                  </NavLink>
                </li>
              </Fragment>
            )}     
            {CurrentUserState.isLoggedIn && (
              <Fragment>
                <li className='nav-item'>
                  <NavLink to='/article/new' className='nav-link'>
                    <i className='ion-compose'></i>
                    &nbsp; New Post
                  </NavLink>
                </li>
  
                <li className='nav-item'>
                  <NavLink 
                    to={`/profiles/${CurrentUserState.currentUser.username}`}
                    className='nav-link'
                  >
                    <img 
                    className='user-pic' 
                    src={CurrentUserState.currentUser.image} 
                    alt=''
                    />
                    &nbsp; 
                    {CurrentUserState.currentUser.username}
                  </NavLink>
                </li>
              </Fragment>
            )}                   
          </ul>
        </div>
      </nav>
    )
  }

export default TopBar